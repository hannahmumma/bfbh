{% import "macros/svg-icons.twig" as svg %}

{% extends "layouts/block.twig" %}

{% set block_name = 'acf-features' %}

{% set amenities_terms = getTimberTerms('amenities') %}
{% set activities_terms = getTimberTerms('activities') %}
{% set terms = amenities_terms|merge(activities_terms) %}

{% block content %}

	<div class="block--inner">

		{% if block_fields.features_title or block_fields.features_description %}
			<div class="block-header mb-20">
				<h2 class="heading-2 mb-20">{{ block_fields.features_title}}</h2>
				<p class="p-body">{{ block_fields.features_description }}</p>
			</div>
		{% endif %}

		<div class="block-main flex flex-col lg:flex-row">

			<div class="features-wrapper">
			{% for item in block_fields.features %}
				<div class="features{{ not loop.last ? ' mb-40' : null }} " data-type={{ item.type_of_feature|lower }}>
					<div class="intro flex w-full mb-20">
						{% if item.type_of_feature %}
							<h3 class="heading-3">{{ item.type_of_feature }}</h3>
						{% endif %}
					</div>

					<div class="features--inner -ml-20 -mr-20 relative" data-slider>	
						<div class="features-scrollable flex flex-nowrap overflow-x-scroll lg:overflow-x-hidden">
							{% for detail in item.feature_details %}
								{% if detail.name %}

									<div class="feature bg-white flex flex-col justify-items-end mr-10 p-16 border-1 rounded-16 border-gray w-2/5 md:w-9/20 md:mr-16" data-feature="{{ detail.name|lower }}">
										
										{% if detail.image %}
											<img class="mb-16 rounded-16" src="{{ detail.image.url|resize(300, 200) }}" alt=" " />
										{% endif %}

										{% if detail.name %}
											<h4 class="heading-4 mb-8 mt-auto">{{ detail.name }}</h4>
										{% endif %}

										{% if detail.amenities %}
											{% include 'modules/feature-details.twig' with {
												items: detail.amenities,
												terms: terms
											} %}
										{% endif %}

										{% if detail.activities %}
											{% include 'modules/feature-details.twig' with {
												items: detail.activities,
												terms: terms
											} %}
										{% endif %}										

									</div>

								{% endif %}

							{% endfor %}
						</div>																	
					</div>
				</div>	
			{% endfor %}
			</div>
		</div>

	</div>

{% endblock %}
